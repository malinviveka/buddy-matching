
{% extends 'helloapp/base.html' %}

{% block title %}Create Account{% endblock %}

{% load static i18n %}

{% block content %}
    <script src="{% static 'helloapp/account_creation.js' %}" defer></script>
    <link rel="stylesheet" type="text/css" href="{% static 'helloapp/styles.css' %}"> <!-- Link to CSS file -->

    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" /> <!-- select2 CSS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- jQuery (required for select2) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script> <!-- select2 JS -->

    <h2>{% trans "Create Account" %}</h2>

    {% get_current_language as LANGUAGE_CODE %}
    <div id="language-info" data-language="{{ LANGUAGE_CODE }}"></div>
    
    
    <form id="accountCreationForm" method="POST" action="{% url 'create_account' %}" class="form-account-creation">
        {% csrf_token %}
        
        <!-- LABELS AND INPUT FIELDS -->
        <div class="form-box"> 
            <label for="id_role">{% trans "Role:" %}</label>
            {{ form.role }}
        </div>
        <div class="form-box"> 
            <label for="id_surname">{% trans "Surname:" %}</label>
            {{ form.surname }}
        </div>
        <div class="form-box"> 
            <label for="id_first_name">{% trans "First Name:" %}</label>
            {{ form.first_name }}
        </div>
        <div class="form-box"> 
            <label for="id_preferred_language">{% trans "Preferred Language:" %}</label>
            {{ form.preferred_language }}
        </div>
        <div class="form-box"> 
            <label for="id_email">E-Mail:</label>
            <!--{{ form.email }}-->
            <input type="email" name="email" id="id_email" class="form-control" placeholder="@stud.tu-darmstadt.de", required>
        </div>
        <div class="form-box"> 
            <label for="id_degree_level">{% trans "Degree Level:" %}</label>
            {{ form.degree_level }}
        </div>
        <div class="form-box"> 
            <label for="id_app_matr_number">{% trans "Matriculation/Application Number:" %}</label>
            <!--{{ form.app_matr_number }}-->
            <input type="text" name="app_matr_number" id="id_app_matr_number" class="form-control" placeholder="0123456", required>
        </div>
        <div class="form-box"> 
            <label for="id_department">{% trans "Department:" %}</label>
            {{ form.department }}
        </div>
        <div class="form-box">     
            <label for="id_country">{% trans "Country:" %}</label>
            {{ form.country }}
        </div>
        <div class="form-box"> 
            <label for="id_preferred_number_of_partners">{% trans "Preferred Number of Partners:" %}</label>
            <!--{{ form.preferred_number_of_partners }}-->
            <!-- value="1": preferred number of partners field is hidden from international students but still has to be filled out-->
            <input type="number" name="preferred_number_of_partners" id="id_preferred_number_of_partners" class="form-control", data-role-field="Buddy", value="1">
        </div>
        <div class="form-box"> 
            <label for="id_interests">{% trans "Interests:" %}</label>
            {{ form.interests }}
        </div>

        <!-- initializing select2 field for country list -->
        <script class="country-searchbar">
            $(document).ready(function() {
                $('#id_country').select2({
                    placeholder: 'Select a country', 
                    allowClear: true,
                    width: '100%', //adjust to rest of form
                    //dropdownCssClass: 'select2-dropdown-custom' // without search bar
                });

                  // same styling as in styles.css for input 
                  $('.select2-selection').css({
                    'width': '100%',
                    'padding':  'var(--size-space-300) var(--size-space-400)',
                    'border': 'var(--border-input-width) solid var(--border-input-color)',
                    'border-radius': 'var(--border-radius-200)',
                    'padding': 'var(--size-space-300) var(--size-space-400)',
                    'font-size': 'var(--small-body-font-size)',
                    'color': 'var(--text-color)',
                    'height': 'auto'
                });
            });
        </script>

        <!-- PASSWORD SECTION-->
        <div class="password-box">
            <label for="id_password1">{% trans "Password:" %}</label>
            <!--{{ form.password1 }}-->
            <input type="password" name="password1" id="id_password1" class="form-control" required>

            <p class="description">
                {% trans "Your password can’t be too similar to your other personal information." %} <br> 
                {% trans "Your password must contain at least 8 characters." %} <br>
                {% trans "Your password can’t be a commonly used password." %} <br>
                {% trans "Your password can’t be entirely numeric." %}
            </p>

            <label for="id_password2">{% trans "Confirm Password:" %}</label>
            <!--{{ form.password2 }}-->
            <input type="password" name="password2" id="id_password2" class="form-control" required>

            <p class="description">
                {% trans "Enter the same password as before, for verification." %}
            </p>
        </div>
        
        <!-- SUBMIT BUTTON -->
        <button type="submit" id="submitAccountButton" class="button">Create Account</button>
        
    </form>

    <p>* Note that gender is not taken into account.</p>

    <div id="message" style="margin-top: 20px;"></div>

{% endblock %}